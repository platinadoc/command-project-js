{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-78803eaed8eee4fa.js","src/js/modal-gallery.js","src/templates/modal-gallery.hbs","node_modules/@parcel/runtime-js/lib/runtime-ab9debf6bb4854b5.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"daTov\\\":\\\"index.446f61aa.js\\\",\\\"bnhzl\\\":\\\"placeholder.142d7701.png\\\",\\\"5UbS1\\\":\\\"index.caeb98a6.css\\\"}\"));","import createModal from '../templates/modal-gallery.hbs';\nimport { convertFilms } from './convertFilms';\nimport { TheMovieDBApi } from './fetchfilm';\nimport placeholder from '../images/placeholder.png';\n// import axios from \"axios\";\n\nconst openModalEl = document.querySelector('.js-home-page');\nconst modalBackdropEl = document.querySelector('[data-modal]');\nconst closeModalBtnEl = document.querySelector('[data-modal-close]');\nconst modalEl = document.querySelector('.modal__body');\nconst outsideModalEl = document.querySelector('.backdrop');\nconst body = document.querySelector('body');\nlet movie_id = null;\n\nopenModalEl.addEventListener('click', onOpenModalClick);\n\nfunction onOpenModalClick(e) {\n  if (e.target === e.currentTarget) return;\n\n  modalBackdropEl.classList.remove('visually__hidden');\n  body.classList.add('no-scroll');\n\n  closeModalBtnEl.addEventListener('click', onCloseModalClick);\n  body.addEventListener('keydown', onEscapeBtnClick);\n  outsideModalEl.addEventListener('click', onOutsideModalClick);\n\n  const dataId = e.target.dataset;\n\n  // console.log(e.target.dataset);\n  // console.log(e.currentTarget);\n\n    if (dataId.item) {\n    movie_id = Number(dataId.item);\n  } else if (dataId.src) {\n    movie_id = Number(dataId.src);\n  } else if (dataId.film) {\n    movie_id = Number(dataId.film);\n  } else if (dataId.hero) {\n    movie_id = Number(dataId.hero);\n  }else if (dataId.parameters) {\n    movie_id = Number(dataId.parameters);\n  } else if (dataId.votes) {\n    movie_id = Number(dataId.votes);\n  } else {\n    return;\n  }\n\n  // if (dataId.id) {\n  //   movie_id = Number(dataId.id);\n  // } else if (dataId.src) {\n  //   movie_id = Number(dataId.src);\n  // } else if (dataId.hero) {\n  //   movie_id = Number(dataId.hero);\n  // } else if (dataId.genres) {\n  //   movie_id = Number(dataId.genres);\n  // } else if (dataId.release) {\n  //   movie_id = Number(dataId.release);\n  // } else if (dataId.vote) {\n  //   movie_id = Number(dataId.vote);\n  // } else if (dataId.list) {\n  //   movie_id = Number(dataId.list);\n  // } else {\n  //   return;\n  // }\n\n  renderModalCard(movie_id);\n}\n\nfunction onCloseModalClick() {\n  modalBackdropEl.classList.add('visually__hidden');\n  body.classList.remove('no-scroll');\n\n  closeModalBtnEl.removeEventListener('click', onCloseModalClick);\n  body.removeEventListener('keydown', onEscapeBtnClick);\n  outsideModalEl.removeEventListener('click', onOutsideModalClick);\n\n  modalEl.innerHTML = '';\n}\n\nfunction onEscapeBtnClick(e) {\n  if (e.code === 'Escape') {\n    onCloseModalClick();\n  }\n}\n\nfunction onOutsideModalClick(e) {\n  if (e.target !== e.currentTarget) return;\n\n  onCloseModalClick();\n}\n\nfunction addWatchedMovie(e) {\n  const movieId = e.target.dataset.id;\n  const watchedList = JSON.parse(localStorage.getItem('watched')) || [];\n  const idx = watchedList.indexOf(movieId);\n  if (idx === -1) {\n    watchedList.push(movieId);\n  } else {\n    watchedList.splice(idx, 1);\n  }\n  localStorage.setItem('watched', JSON.stringify(watchedList));\n}\n\nfunction addQueueMovie(e) {\n  const movieId = e.target.dataset.id;\n  const queueList = JSON.parse(localStorage.getItem('queue')) || [];\n  const idx = queueList.indexOf(movieId);\n  if (idx === -1) {\n    queueList.push(movieId);\n  } else {\n    queueList.splice(idx, 1);\n  }\n  localStorage.setItem('queue', JSON.stringify(queueList));\n}\n\nasync function renderModalCard(movie_id) {\n  const api = new TheMovieDBApi(movie_id);\n\n  const response = await api.fetchFilmById(movie_id);\n\n  // const filmList = [response];\n\n  // console.log(response);\n  // const modalFilm = convertFilms(filmList)[0];\n\n  response.popularity = response.popularity.toFixed(1);\n\n  response.poster_path = response.poster_path\n    ? `https://image.tmdb.org/t/p/w500${response.poster_path}`\n    : placeholder;\n\n  modalEl.innerHTML = createModal(response);\n\n  const addToWatchedBtnEl = document.querySelector('.js-addToWatched');\n  addToWatchedBtnEl.addEventListener('click', addWatchedMovie);\n\n  const addToQueueBtnEl = document.querySelector('.js-addToQueue');\n  addToQueueBtnEl.addEventListener('click', addQueueMovie);\n}\n","<div class=\"modal__thumb\">\n  <img \n  src=\"{{this.poster_path}}\"\n      alt='{{title}}'\n      data-src='{{id}}' class=\"modal__image\">\n  {{!-- <img srcset=\"./images/poster-mob-1x.jpg 240w, ./images/poster-tab-1x.jpg 264w, ./images/poster-desk-1x.jpg 375w, ./images/poster-mob-2x.jpg 480w, ./images/team-card-1-tab-2x.jpg 528w, ./images/poster-desk-2x.jpg 750w\" sizes=\"(min-width: 1280px) 375px, (min-width: 768px) 264px, (min-width: 320px) 240px, 100vw\" src=\"./images/poster-mob-1x.jpg\" alt=\"poster a fistiful of lead\" class=\"modal__image\">       --}}\n</div>\n<div class=\"modal__descr\">\n  <h2 class=\"modal__descr-title\">{{title}}</h2>\n  <ul class=\"modal__descr-list\">\n    <li class=\"modal__descr-list-item\">\n      <p class=\"modal__descr-list-text--accented\">\n        <span class=\"modal__descr-list-key\">Vote / Votes</span>\n        <span class=\"modal__descr-list-value-block--accented\">\n          <span class=\"modal__descr-list-value--accented\">{{vote_average}}</span>\n        </span>\n        <span class=\"modal__descr-list-value-separator\">/</span>\n        <span class=\"modal__descr-list-value-block--unaccented\">\n          <span class=\"modal__descr-list-value--unaccented\">{{vote_count}}</span>\n        </span>\n\n        </p>\n      </li>\n        <li class=\"modal__descr-list-item\">\n        <p class=\"modal__descr-list-text\">\n          <span class=\"modal__descr-list-key\">Popularity</span>\n          <span class=\"modal__descr-list-value\">{{popularity}}</span>\n        </p>\n      </li>\n      <li class=\"modal__descr-list-item\">\n        <p class=\"modal__descr-list-text\">\n          <span class=\"modal__descr-list-key\">Original Title</span>\n          <span class=\"modal__descr-list-value--uppercased\">{{original_title}}</span>\n        </p>\n      </li>\n      <li class=\"modal__descr-list-item\">\n        <p class=\"modal__descr-list-text\">\n          <span class=\"modal__descr-list-key\">Genre</span>\n          <span class=\"modal__descr-list-value\">\n            {{#each genres}}\n              <span class=\"modal__descr-list-value--listed\">{{name}}</span>\n            {{/each}}\n          </span>\n        </p>\n      </li>\n    </ul>\n    <h3 class=\"modal__descr-subtitle\">About</h3>\n    <p class=\"modal__descr-text\">{{overview}}</p>\n    <div class=\"modal__button-block\">\n      <button type=\"button\" class=\"modal__button js-addToWatched\" data-id=\"{{id}}\" data-add=\"watched\">add to Watched</button>\n      <button type=\"button\" class=\"modal__button js-addToQueue\" data-id=\"{{id}}\" data-add=\"queue\">add to Queue</button>\n    </div>\n  </div>\n","module.exports = require('./helpers/bundle-url').getBundleURL('daTov') + require('./helpers/bundle-manifest').resolve(\"bnhzl\");"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$l5bVx","$8e3d284694dd8a88$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","helper","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","escapeExpression","hooks","helperMissing","nullContext","name","hash","loc","start","line","column","end","compiler","main","stack1","alias1","alias2","alias3","alias4","lambda","fn","program","inverse","noop","useData","$e2ed5b898871de98$exports","getBundleURL","resolve","$f6066b6145f68f21$var$openModalEl","document","querySelector","$f6066b6145f68f21$var$modalBackdropEl","$f6066b6145f68f21$var$closeModalBtnEl","$f6066b6145f68f21$var$modalEl","$f6066b6145f68f21$var$outsideModalEl","$f6066b6145f68f21$var$body","$f6066b6145f68f21$var$movie_id","$f6066b6145f68f21$var$onCloseModalClick","classList","add","remove","removeEventListener","$f6066b6145f68f21$var$onEscapeBtnClick","$f6066b6145f68f21$var$onOutsideModalClick","innerHTML","e","code","target","currentTarget","$f6066b6145f68f21$var$addWatchedMovie","movieId","dataset","id","watchedList","localStorage","getItem","idx","indexOf","push","splice","setItem","stringify","$f6066b6145f68f21$var$addQueueMovie","queueList","$f6066b6145f68f21$var$_renderModalCard","$2TvXO","mark","_callee","movie_id1","api","response","$42uFz","TheMovieDBApi","fetchFilmById","_ctx","sent","popularity","toFixed","poster_path","concat","addEventListener","apply","this","arguments","dataId","item","Number","src","film","hero","parameters","votes","$f6066b6145f68f21$var$renderModalCard"],"version":3,"file":"index.446f61aa.js.map"}